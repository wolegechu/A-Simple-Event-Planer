function setValidityMsg(e,t,a){e.innerHTML=a;var i=e.parentNode;0===t?i.classList=["form-group has-warning"]:1===t&&(i.classList=["form-group has-success"])}var userName="";firebase.auth().onAuthStateChanged(function(e){e?userName=e.displayName:self.location.href="index.html"});var database=firebase.database(),ref=database.ref("events/"+userName),tableRef=document.querySelector("#tableEvents"),inputLocation=document.querySelector("#inputLocation"),inputComment=document.querySelector("#inputComment"),eventName=document.querySelector("#inputEventName"),startTime=document.querySelector("#inputStartTime"),endTime=document.querySelector("#inputEndTime"),host=document.querySelector("#inputHost"),guestList=document.querySelector("#inputGuestList"),type=document.querySelector("#inputType"),labelEventName=document.querySelector("#labelEventName"),labelStartTime=document.querySelector("#labelStartTime"),labelEndTime=document.querySelector("#labelEndTime"),labelHost=document.querySelector("#labelHost"),labelLocation=document.querySelector("#labelLocation"),labelType=document.querySelector("#labelType");ref.orderByKey().once("value").then(function(e){var t=e.val();for(var a in t[userName]){var i=t[userName][a],n=tableRef.insertRow(0);n.innerHTML="<th>"+i.name+"</th><th>"+i.type+"</th><th>"+i.host+"</th><th>"+i.guestList+"</th><th>"+i.startTime+"</th><th>"+i.endTime+"</th><th>"+i.location+"</th><th>"+i.comment+"</th>"}}),ref.on("child_changed",function(e,t){var a=Object.keys(e.val()),i=e.val()[a[a.length-1]],n=tableRef.insertRow(0);n.innerHTML="<th>"+i.name+"</th><th>"+i.type+"</th><th>"+i.host+"</th><th>"+i.guestList+"</th><th>"+i.startTime+"</th><th>"+i.endTime+"</th><th>"+i.location+"</th><th>"+i.comment+"</th>"});var startTimestamp,endTimestamp,currentTimestamp=new Date;!function(){eventName.addEventListener("input",function(){eventName.value.length>1?setValidityMsg(labelEventName,1,"Event Name"):setValidityMsg(labelEventName,0,"Event Name (required)")}),type.addEventListener("input",function(){type.value.length>1?setValidityMsg(labelType,1,"Event Type"):setValidityMsg(labelType,0,"Event Type (required)")}),inputLocation.addEventListener("input",function(){inputLocation.value.length>1?setValidityMsg(labelLocation,1,"Location"):setValidityMsg(labelLocation,0,"Location (required)")}),host.addEventListener("input",function(){host.value.length>1?setValidityMsg(labelHost,1,"Host"):setValidityMsg(labelHost,0,"Host (required)")}),startTime.addEventListener("keyup",function(){startTimestamp=new Date(startTime.value),startTimestamp>currentTimestamp?setValidityMsg(labelStartTime,1,"Start Time"):setValidityMsg(labelStartTime,0,"Start Time (it should start in the future)")}),endTime.addEventListener("keyup",function(){endTimestamp=new Date(endTime.value),endTimestamp>startTimestamp?setValidityMsg(labelEndTime,1,"End Time"):setValidityMsg(labelEndTime,0,"End Time (End date-time should take place after Start date-time)")})}(),document.querySelector("#submit").onclick=function(){eventName.value.length>1?setValidityMsg(labelEventName,1,"Event Name"):setValidityMsg(labelEventName,0,"Event Name (required)"),inputLocation.value.length>1?setValidityMsg(labelLocation,1,"Location"):setValidityMsg(labelLocation,0,"Location (required)"),host.value.length>1?setValidityMsg(labelHost,1,"Host"):setValidityMsg(labelHost,0,"Host (required)"),startTimestamp=new Date(startTime.value),startTimestamp>currentTimestamp?setValidityMsg(labelStartTime,1,"Start Time"):setValidityMsg(labelStartTime,0,"Start Time (it should start in the future)"),endTimestamp=new Date(endTime.value),endTimestamp>startTimestamp?setValidityMsg(labelEndTime,1,"End Time"):setValidityMsg(labelEndTime,0,"End Time (End date-time should take place after Start date-time)");var e={name:eventName.value,type:type.value,host:host.value,startTime:startTime.value,endTime:endTime.value,guestList:guestList.value,location:inputLocation.value,comment:inputComment.value},t=database.ref("events/"+userName).push();t.set(e);var a=document.querySelector('section[data-route="message"]');a.innerHTML='<div class="alert alert-success" role="alert">Created!</div>'};
function submitAbility(){inputEmail.value.length>0&&inputPassword.value.length>0?submit.disabled=!1:submit.disabled=!0}var home=document.querySelector('section[data-route="home"]');firebase.auth().onAuthStateChanged(function(e){e&&(home.innerHTML='<div class="alert alert-success" role="alert">Welcome!</div>',setTimeout(function(){self.location.href="app.html"},2e3))});var submit=document.querySelector("#submit"),inputEmail=document.querySelector("#inputEmail"),inputPassword=document.querySelector("#inputPassword");submit.disabled=!0,inputEmail.addEventListener("input",submitAbility),inputPassword.addEventListener("input",submitAbility),submit.onclick=function(){var e=inputEmail.value,t=inputPassword.value;console.log(firebase),firebase.auth().signInWithEmailAndPassword(e,t).catch(function(e){home.innerHTML='<div class="alert alert-danger" role="alert">'+e.message+"</div>"})};
function setValidityMsg(e,a,t){e.innerHTML=t;var s=e.parentNode;0===a?s.classList=["form-group has-warning"]:1===a&&(s.classList=["form-group has-success"])}var nameInput=document.querySelector("#inputName"),emailInput=document.querySelector("#inputEmail"),passwordInput=document.querySelector("#inputPassword"),repeatPasswordInput=document.querySelector("#inputRepeatPassword"),submit=document.querySelector("#submit"),message=document.querySelector('section[data-route="message"]'),labelName=document.querySelector("#labelName"),labelEmail=document.querySelector("#labelEmail"),labelPassword=document.querySelector("#labelPassword"),labelRepeatPassword=document.querySelector("#labelRepeatPassword"),startValidity=!1,endValidity=!1;emailInput.addEventListener("input",function(){0===emailInput.validationMessage.length?setValidityMsg(labelEmail,1,"Email"):setValidityMsg(labelEmail,0,"Email ("+emailInput.validationMessage+")")}),passwordInput.addEventListener("input",function(){var e=passwordInput.value;e.length<10?setValidityMsg(labelPassword,0,"Password (fewer than 10 characters)"):e.length>20?setValidityMsg(labelPassword,0,"Password (greater than 20 characters)"):e.match(/[a-z]/g)?e.match(/[A-Z]/g)?setValidityMsg(labelPassword,1,"Password"):setValidityMsg(labelPassword,0,"Password (missing a uppercase letter)"):setValidityMsg(labelPassword,0,"Password (missing a lowercase letter)")}),repeatPasswordInput.addEventListener("input",function(){repeatPasswordInput.value===passwordInput.value?setValidityMsg(labelRepeatPassword,1,"Repeat Password"):setValidityMsg(labelRepeatPassword,0,"Repeat Password (don't match)")}),nameInput.addEventListener("input",function(){nameInput.value.length>1?setValidityMsg(labelName,1,"Name"):setValidityMsg(labelName,0,"Name (required)")}),submit.onclick=function(){var e=passwordInput.value,a=repeatPasswordInput.value;return e!==a?repeatPasswordInput.setCustomValidity("the password must match"):nameInput.checkValidity()&&passwordInput.checkValidity()&&repeatPasswordInput.checkValidity()&&emailInput.checkValidity()?(firebase.auth().createUserWithEmailAndPassword(emailInput.value,e).catch(function(e){return message.innerHTML='<div class="alert alert-danger" role="alert">'+e.message+".</div>"}),firebase.auth().currentUser.updateProfile({displayName:nameInput.value}).then(function(){setTimeout(function(){self.location.href="app.html"},1500)}),void(message.innerHTML='<div class="alert alert-success" role="alert">Success</div>')):void(message.innerHTML='<div class="alert alert-danger" role="alert">Please complete the form</div>')};